import{ac as h,X as x,Y as y,Z as S,a0 as k,a2 as B,a3 as r,ab as C,c as t,ag as F,a7 as e,ah as L,ai as i,J as M,a8 as U}from"./index-5fdb30a4.js";import{c as q,a as d,u as N,d as m,V as P}from"./index.esm-4c2e4fc2.js";import{V as R}from"./VRow-75030038.js";import{V as T}from"./VCol-8836c20f.js";const $={__name:"LoginView",setup(j){const{api:p}=C(),g=x(),c=y(),_=S(),V=q({account:d().required("名稱為必填欄位").min(4,"使用者名稱長度不符").max(20,"使用者名稱長度不符"),password:d().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符")}),{handleSubmit:b,isSubmitting:f}=N({validationSchema:V}),l=m("account"),n=m("password"),w=b(async u=>{var a,s;try{const{data:o}=await p.post("/users/login",{account:u.account,password:u.password});_.login(o.result),c({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),g.push("/")}catch(o){console.log(o);const v=((s=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:s.message)||"發生錯誤，請稍後再試";c({text:v,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(u,a)=>(k(),B(R,{id:"login-home",class:"bg-c1 align-center justify-center"},{default:r(()=>[t(T,{cols:"12"},{default:r(()=>[t(F,{id:"card",class:"pa-3 ma-auto",width:"450",title:"Login"},{default:r(()=>[t(P,{disabled:e(f),onSubmit:L(e(w),["prevent"])},{default:r(()=>[t(i,{label:"使用者名稱",minlength:"4",maxlength:"20",counter:"",modelValue:e(l).value.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(l).value.value=s),"error-messages":e(l).errorMessage.value},null,8,["modelValue","error-messages"]),t(i,{label:"密碼",minlength:"4",maxlength:"20",counter:"",type:"password",modelValue:e(n).value.value,"onUpdate:modelValue":a[1]||(a[1]=s=>e(n).value.value=s),"error-messages":e(n).errorMessage.value},null,8,["modelValue","error-messages"]),t(M,{type:"submit",color:"green"},{default:r(()=>[U("登入")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}},Y=h($,[["__scopeId","data-v-7d09cc3d"]]);export{Y as default};
