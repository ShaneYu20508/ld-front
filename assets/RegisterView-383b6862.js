import{X as C,Y as y,a0 as S,a2 as k,a3 as t,ab as B,c as o,ae as M,a7 as e,af as _,ag as u,J as q,a8 as F}from"./index-54e8280a.js";import{v as R}from"./index-8b68ea82.js";import{c as U,a as n,b as $,u as E,d as m,V as N}from"./index.esm-33e2fde0.js";import{V as P,a as T}from"./VRow-2450a831.js";const Y={__name:"RegisterView",setup(j){const{api:V}=B(),v=C(),g=y(),f=U({account:n().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),email:n().required("信箱為必填欄位").test("isEmail","信箱格式錯誤",r=>R.isEmail(r)),password:n().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符"),passwordConfirm:n().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符").oneOf([$("password")],"密碼不一致")}),{handleSubmit:b,isSubmitting:w}=E({validationSchema:f}),i=m("account"),d=m("email"),c=m("password"),p=m("passwordConfirm"),x=b(async r=>{var a,s;try{await V.post("/users",{account:r.account,email:r.email,password:r.password}),g({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),v.push("/login")}catch(l){console.log(l);const h=((s=(a=l==null?void 0:l.response)==null?void 0:a.data)==null?void 0:s.message)||"發生錯誤，請稍後再試";g({text:h,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(r,a)=>(S(),k(P,{id:"register-home",class:"bg-c1 align-center justify-center h-100"},{default:t(()=>[o(T,{cols:"12"},{default:t(()=>[o(M,{class:"pa-3 ma-auto",width:"450",title:"Register"},{default:t(()=>[o(N,{disabled:e(w),onSubmit:_(e(x),["prevent"])},{default:t(()=>[o(u,{label:"使用者名稱",minlength:"4",maxlength:"20",counter:"",modelValue:e(i).value.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(i).value.value=s),"error-messages":e(i).errorMessage.value},null,8,["modelValue","error-messages"]),o(u,{label:"信箱",type:"email",modelValue:e(d).value.value,"onUpdate:modelValue":a[1]||(a[1]=s=>e(d).value.value=s),"error-messages":e(d).errorMessage.value},null,8,["modelValue","error-messages"]),o(u,{label:"密碼",minlength:"4",maxlength:"20",counter:"",type:"password",modelValue:e(c).value.value,"onUpdate:modelValue":a[2]||(a[2]=s=>e(c).value.value=s),"error-messages":e(c).errorMessage.value},null,8,["modelValue","error-messages"]),o(u,{label:"確認密碼",minlength:"4",maxlength:"20",counter:"",type:"password",modelValue:e(p).value.value,"onUpdate:modelValue":a[3]||(a[3]=s=>e(p).value.value=s),"error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),o(q,{type:"submit",color:"green"},{default:t(()=>[F("註冊")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{Y as default};
