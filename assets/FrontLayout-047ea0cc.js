import{p,m as Y,a as z,g as L,u as N,c as l,b as le,d as ne,e as K,f as Q,h as Z,t as R,i as se,j as ie,k as ee,l as re,n as ue,s as _,o as f,q as ce,V as de,r as U,v as M,w as ve,x as X,y as me,z as $,A as ge,B as fe,C as be,D as he,E as ye,F as Ve,G as E,H as xe,I as Se,J as H,K as ke,L as Be,M as Te,N as _e,O as Ce,P as we,Q as pe,R as Le,S as Ne,T as Pe,U as Ie,W as F,X as Ae,Y as Re,Z as Ee,_ as Me,$ as $e,a0 as g,a1 as C,a2 as S,a3 as d,a4 as T,a5 as w,a6 as j,a7 as D,a8 as A,a9 as De,aa as q,ab as He}from"./index-41264980.js";import{V as Ue}from"./VNavigationDrawer-86d308da.js";import{u as Fe}from"./ssrBoot-bf8b8d12.js";import{V as Ye}from"./VMain-ed37a4c5.js";import{V as O,a as W,b as ze}from"./VList-526fea96.js";import{V as Xe}from"./VContainer-52caa049.js";import"./VDivider-d4f4db80.js";const te=p({text:String,...Y(),...z()},"VToolbarTitle"),ae=L()({name:"VToolbarTitle",props:te(),setup(e,r){let{slots:t}=r;return N(()=>{const v=!!(t.default||t.text||e.text);return l(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var a;return[v&&l("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(a=t.default)==null?void 0:a.call(t)])]}})}),{}}}),je=[null,"prominent","default","comfortable","compact"],oe=p({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>je.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...le(),...Y(),...ne(),...K(),...z({tag:"header"}),...Q()},"VToolbar"),G=L()({name:"VToolbar",props:oe(),setup(e,r){var o;let{slots:t}=r;const{backgroundColorClasses:v,backgroundColorStyles:a}=Z(R(e,"color")),{borderClasses:s}=se(e),{elevationClasses:b}=ie(e),{roundedClasses:m}=ee(e),{themeClasses:h}=re(e),{rtlClasses:y}=ue(),n=_(!!(e.extended||(o=t.extension)!=null&&o.call(t))),u=f(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),c=f(()=>n.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ce({VBtn:{variant:"text"}}),N(()=>{var i;const V=!!(e.title||t.title),x=!!(t.image||e.image),k=(i=t.extension)==null?void 0:i.call(t);return n.value=!!(e.extended||k),l(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},v.value,s.value,b.value,m.value,h.value,y.value,e.class],style:[a.value,e.style]},{default:()=>[x&&l("div",{key:"image",class:"v-toolbar__image"},[t.image?l(U,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):l(de,{key:"image-img",cover:!0,src:e.image},null)]),l(U,{defaults:{VTabs:{height:M(u.value)}}},{default:()=>{var B,P,I;return[l("div",{class:"v-toolbar__content",style:{height:M(u.value)}},[t.prepend&&l("div",{class:"v-toolbar__prepend"},[(B=t.prepend)==null?void 0:B.call(t)]),V&&l(ae,{key:"title",text:e.title},{text:t.title}),(P=t.default)==null?void 0:P.call(t),t.append&&l("div",{class:"v-toolbar__append"},[(I=t.append)==null?void 0:I.call(t)])])]}}),l(U,{defaults:{VTabs:{height:M(c.value)}}},{default:()=>[l(ve,null,{default:()=>[n.value&&l("div",{class:"v-toolbar__extension",style:{height:M(c.value)}},[k])]})]})]})}),{contentHeight:u,extensionHeight:c}}}),qe=p({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Oe(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=r;let v=0;const a=X(null),s=_(0),b=_(0),m=_(0),h=_(!1),y=_(!1),n=f(()=>Number(e.scrollThreshold)),u=f(()=>me((n.value-s.value)/n.value||0)),c=()=>{const o=a.value;!o||t&&!t.value||(v=s.value,s.value="window"in o?o.pageYOffset:o.scrollTop,y.value=s.value<v,m.value=Math.abs(s.value-n.value))};return $(y,()=>{b.value=b.value||s.value}),$(h,()=>{b.value=0}),ge(()=>{$(()=>e.scrollTarget,o=>{var x;const V=o?document.querySelector(o):window;V&&V!==a.value&&((x=a.value)==null||x.removeEventListener("scroll",c),a.value=V,a.value.addEventListener("scroll",c,{passive:!0}))},{immediate:!0})}),fe(()=>{var o;(o=a.value)==null||o.removeEventListener("scroll",c)}),t&&$(t,c,{immediate:!0}),{scrollThreshold:n,currentScroll:s,currentThreshold:m,isScrollActive:h,scrollRatio:u,isScrollingUp:y,savedScroll:b}}const We=p({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...oe(),...be(),...qe(),height:{type:[Number,String],default:64}},"VAppBar"),Ge=L()({name:"VAppBar",props:We(),emits:{"update:modelValue":e=>!0},setup(e,r){let{slots:t}=r;const v=X(),a=he(e,"modelValue"),s=f(()=>{var B;const i=new Set(((B=e.scrollBehavior)==null?void 0:B.split(" "))??[]);return{hide:i.has("hide"),inverted:i.has("inverted"),collapse:i.has("collapse"),elevate:i.has("elevate"),fadeImage:i.has("fade-image")}}),b=f(()=>{const i=s.value;return i.hide||i.inverted||i.collapse||i.elevate||i.fadeImage||!a.value}),{currentScroll:m,scrollThreshold:h,isScrollingUp:y,scrollRatio:n}=Oe(e,{canScroll:b}),u=f(()=>e.collapse||s.value.collapse&&(s.value.inverted?n.value>0:n.value===0)),c=f(()=>e.flat||s.value.elevate&&(s.value.inverted?m.value>0:m.value===0)),o=f(()=>s.value.fadeImage?s.value.inverted?1-n.value:n.value:void 0),V=f(()=>{var P,I;if(s.value.hide&&s.value.inverted)return 0;const i=((P=v.value)==null?void 0:P.contentHeight)??0,B=((I=v.value)==null?void 0:I.extensionHeight)??0;return i+B});ye(f(()=>!!e.scrollBehavior),()=>{xe(()=>{s.value.hide?s.value.inverted?a.value=m.value>h.value:a.value=y.value||m.value<h.value:a.value=!0})});const{ssrBootStyles:x}=Fe(),{layoutItemStyles:k}=Ve({id:e.name,order:f(()=>parseInt(e.order,10)),position:R(e,"location"),layoutSize:V,elementSize:_(void 0),active:a,absolute:R(e,"absolute")});return N(()=>{const i=G.filterProps(e);return l(G,E({ref:v,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...k.value,"--v-toolbar-image-opacity":o.value,height:void 0,...x.value},e.style]},i,{collapse:u.value,flat:c.value}),t)}),{}}}),Je=p({...Se({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),Ke=L()({name:"VAppBarNavIcon",props:Je(),setup(e,r){let{slots:t}=r;return N(()=>l(H,E(e,{class:["v-app-bar-nav-icon"]}),t)),{}}}),Qe=L()({name:"VAppBarTitle",props:te(),setup(e,r){let{slots:t}=r;return N(()=>l(ae,E(e,{class:"v-app-bar-title"}),t)),{}}});const Ze=p({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:ke,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Y(),...Be({location:"top end"}),...K(),...z(),...Q(),...Te({transition:"scale-rotate-transition"})},"VBadge"),J=L()({name:"VBadge",inheritAttrs:!1,props:Ze(),setup(e,r){const{backgroundColorClasses:t,backgroundColorStyles:v}=Z(R(e,"color")),{roundedClasses:a}=ee(e),{t:s}=_e(),{textColorClasses:b,textColorStyles:m}=Ce(R(e,"textColor")),{themeClasses:h}=we(),{locationStyles:y}=pe(e,!0,n=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(n)?+(e.offsetY??0):["left","right"].includes(n)?+(e.offsetX??0):0));return N(()=>{const n=Number(e.content),u=!e.max||isNaN(n)?e.content:n<=+e.max?n:`${e.max}+`,[c,o]=Le(r.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return l(e.tag,E({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},o,{style:e.style}),{default:()=>{var V,x;return[l("div",{class:"v-badge__wrapper"},[(x=(V=r.slots).default)==null?void 0:x.call(V),l(Ne,{transition:e.transition},{default:()=>{var k,i;return[Pe(l("span",E({class:["v-badge__badge",h.value,t.value,a.value,b.value],style:[v.value,m.value,e.inline?{}:y.value],"aria-atomic":"true","aria-label":s(e.label,n),"aria-live":"polite",role:"status"},c),[e.dot?void 0:r.slots.badge?(i=(k=r.slots).badge)==null?void 0:i.call(k):e.icon?l(F,{icon:e.icon},null):u]),[[Ie,e.modelValue]])]}})])]}})}),{}}}),it={__name:"FrontLayout",setup(e){const{apiAuth:r}=He(),t=Ae(),v=Re(),a=Ee(),{mobile:s}=Me(),b=f(()=>s.value),m=X(!1),h=f(()=>[{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!a.isLogin},{to:"/join",text:"加入我們",icon:"mdi-login",show:!a.isLogin},{to:"/login",text:"登入",icon:"mdi-login",show:!a.isLogin},{to:"/post",text:"發布任務",icon:"mdi-list-box",show:a.isLogin&&!a.isMailman},{to:"/mailmans",text:"幹員列表",icon:"mdi-account",show:a.isLogin&&!a.isMailman},{to:"/missionlist",text:"任務清單",icon:"mdi-list-box",show:a.isLogin&&a.isMailman},{to:"/missionpage",text:"執行中任務",icon:"mdi-list-box",show:a.isLogin&&a.isMailman},{to:"/admin",text:"管理",icon:"mdi-cog",show:a.isLogin&&a.isAdmin}]),y=async()=>{var n,u;try{await r.delete("/users/logout"),a.logout(),v({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),t.push("/")}catch(c){const o=((u=(n=c==null?void 0:c.response)==null?void 0:n.data)==null?void 0:u.message)||"發生錯誤，請稍後再試";v({text:o,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(n,u)=>{const c=$e("RouterView");return g(),C(w,null,[b.value?(g(),S(Ue,{key:0,modelValue:m.value,"onUpdate:modelValue":u[0]||(u[0]=o=>m.value=o),temporary:"",location:"left",color:"c1"},{default:d(()=>[l(ze,{nav:""},{default:d(()=>[(g(!0),C(w,null,j(h.value,o=>(g(),C(w,{key:o.to},[o.show?(g(),S(O,{key:0,to:o.to},{prepend:d(()=>[l(F,{icon:o.icon},null,8,["icon"])]),append:d(()=>[o.to==="/cart"?(g(),S(J,{key:0,color:"error",content:D(a).cart,inline:""},null,8,["content"])):T("",!0)]),default:d(()=>[l(W,null,{default:d(()=>[A(q(o.text),1)]),_:2},1024)]),_:2},1032,["to"])):T("",!0)],64))),128)),D(a).isLogin?(g(),S(O,{key:0,onClick:y},{prepend:d(()=>[l(F,{icon:"mdi-logout"})]),default:d(()=>[l(W,null,{default:d(()=>[A("登出")]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1},8,["modelValue"])):T("",!0),l(Ge,{color:"c1"},{default:d(()=>[l(Xe,{class:"d-flex align-center"},{default:d(()=>[l(H,{to:"/",active:!1,color:"c2"},{default:d(()=>[l(Qe,null,{default:d(()=>[A("Life Delivery ")]),_:1})]),_:1}),l(De),b.value?(g(),S(Ke,{key:0,onClick:u[1]||(u[1]=o=>m.value=!0)})):(g(),C(w,{key:1},[(g(!0),C(w,null,j(h.value,o=>(g(),C(w,{key:o.to},[o.show?(g(),S(H,{key:0,class:"text-h6",to:o.to,"prepend-icon":o.icon},{default:d(()=>[A(q(o.text)+" ",1),o.to==="/cart"?(g(),S(J,{key:0,color:"error",content:D(a).cart,floating:""},null,8,["content"])):T("",!0)]),_:2},1032,["to","prepend-icon"])):T("",!0)],64))),128)),D(a).isLogin?(g(),S(H,{key:0,class:"text-h6","prepend-icon":"mdi-logout",onClick:y},{default:d(()=>[A("登出")]),_:1})):T("",!0)],64))]),_:1})]),_:1}),l(Ye,null,{default:d(()=>[(g(),S(c,{key:n.$route.path}))]),_:1})],64)}}};export{it as default};
